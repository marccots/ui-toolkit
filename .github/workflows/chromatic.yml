# .github/workflows/chromatic.yml

# Workflow name
name: 'Review on Chromatic'

# Event for the workflow
on:
  pull_request:
    branches: "*"
    tags:
      - '*'

# List of jobs
jobs:
  chromatic-deployment:
    steps:
        # Operating System
        runs-on: ubuntu-latest
        # ðŸ‘‡ Checks if the branch is not main and runs Chromatic
      - name: Publish to Chromatic
        if: github.ref != 'refs/heads/master'
        uses: chromaui/action@v1
        # Required options for the Chromatic GitHub Action
        with:
          # ðŸ‘‡ Chromatic projectToken, refer to the manage page to obtain it.
          projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}
        # ðŸ‘‡ Checks if the branch is main and accepts all changes in Chromatic
      - name: Publish to Chromatic and auto accept changes
        if: github.ref == 'refs/heads/master'
        uses: chromaui/action@v1
        # Required options for the Chromatic GitHub Action
        with:
          # ðŸ‘‡ Chromatic projectToken, refer to the manage page to obtain it.
          projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}
          autoAcceptChanges: true # ðŸ‘ˆ Option to accept all changes